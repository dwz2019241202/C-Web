# Linux System

## vi 和 vim

### **vi和vim模式的相互转换**

### ![image-20230107181910613](C:\Users\86130\AppData\Roaming\Typora\typora-user-images\image-20230107181910613.png)

### vi和vim快捷键

1. 拷贝当前行：yy（在一般模式下运行）， 拷贝当前行向下5行：5yy（在一般模式下运行），粘贴（p）
2. 删除当前行dd，删除当前行向下的5行5dd
3. 在文件中查找某个单词：在命令行下，   /关键字，回车查找，输入n 就是查找下一个)
4. 设置文件的行号 :set nu，取消文件的行号  :set nonu
5. 编辑 /etc/profile文件，使用快捷键到底文档的最末行  G和最首行  gg
6. 在一个文件中输入“hello”,然后又撤销这个动作  u
7. 编辑/etc/profile 文件，并将光标移动到20行shift+g（第一步： :set nu 第二步：输入行号20  第三步：shift+g）

## 开机、重启、用户登录注销

### 命令：

shutdown -h now    立该进行关机
shutdown -h 1          "hello,1分钟后会关机了"
shutdown -r now    现在重新启动计算机
halt                           关机，作用和上面一样.
reboot                      现在重新启动计算机
sync                          把内存的数据同步到磁盘

**不管是重启系统还是关闭系统，首先要运行sync命令，把内存中的数据写到磁盘中**



### 注意事项：

1. 登录时尽量少用root帐号登录，因为它是系统管理员，最大的权限，避免操作失误。可以利用普通用户登录，登录后再用”su - 用户名"命令来切换成系统管理员身份。

2. 在提示符下输入logout即可注销用户

   **注意：logout注销指令在图形运行级别无效，在运行级别3下有效，运行级别这个概念，后面给大家介绍**



## 用户管理

### 添加用户：

| 指令                     | 作用                                                       |
| ------------------------ | :--------------------------------------------------------- |
| useradd 用户名           | 创建一个用户，并在home目录下自动创建一个和用户同名的家目录 |
| useradd -d 目录名 用户名 | 创建一个用户，并指定一个目录给用户作为家目录               |
| passwd 用户名            | 给用户指定密码                                             |
| userdel 用户名           | 删除用户，但是不删除用户的家目录                           |
| userdel -r 用户名        | 删除用户并且删除家目录                                     |
| id 用户名                | 输出用户详细信息                                           |
| su - 用户名              | 切换用户，当需要返回原来用户时用exit                       |
| groupadd 组名            | 创建一个组                                                 |
| groupdel 组名            | 删除一个组                                                 |
| useradd -g 组名 用户名   | 创建一个组，并指定属于哪个组                               |

 **/etc/passwd 文件：**
用户（user）的配置文件，记录用户的各种信息。
每行的含义：
用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录 Shell

```
zhangwuji:x:1000:1000::/home/zhangwuji:/bin/bash
```



 **/etc/shadow文件：**
口令的配置文件
每行的含义：
登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间标志



**/etc/group文件：**
组(group)的配置文件，记录Linux包含的组的信息每行含义：

组名:口令:组标识号:组内用户列表

```
wudang:x:1000:
```

## Linux实用指令

### 运行级别和找回root密码

**运行级别说明:**
**0:关机**
**1:单用户【找回丢失密码】**
**2:多用户状态没有网络服务**
**3:多用户状态有网络服务**
**4:系统未使用保留给用户**
**5:图形界面**
**6:系统重启**

**常用运行级别是3和5**，要修改默认的运行级别可改文件**/etc/inittab**的**id:5:initdefault:**这一行中的数字

```
//切换运行级别
init 5
```



**Question：如何找回root密码**

开机 -> 在引导时输入回车键 -> 看到一个界面输入e -> 看到一个新的界面，选中第二行（编辑内核）在输入e -> 在这行最后输入1,再输入回车键 -> 再次输入 b ,这时就会进入到单用户模式。
这时，我们就进入到单用户模式，使用passwd 指令来修改root密码。

### 帮助指令

```
help 指令
man 指令
```

| 指令    | 作用                                                         |
| ------- | ------------------------------------------------------------ |
| pwd     | 输出当前目录位置                                             |
| ls      | 列出当前目录内所有文件, 选项：-a  -l                         |
| cd      | 切换工作目录： cd ~ 回到家目录   cd .. 回到上级目录          |
| mkdir   | 创建dog目录：mkdir /home/dog     创建多级目录：mkdir -p /home/animal/dog |
| rmdir   | 只能删除空目录：rmdir /home/dog                              |
| rm      | 选项：-r:递归删除整个文件夹   -f:强制删除不提示                   删除非空目录：rm -rf 要删除的目录（谨慎使用） |
| touch   | 创建空文件，也可以创建多个空文件，比如：touch ok1.txt ok2.txt |
| cp      | 拷贝文件到指定目录：cp a.txt /home/                 拷贝文件夹到指定目录：cp -r bbb/ /home/        强制覆盖：\cp -r bbb/ /home/ |
| mv      | 重命名：mv oldNameFile newNameFile                                              移动文件：mv /temp/movefile /targetFolder |
| cat     | 选项：-n：显示行号   cat只能浏览文件，而不能修改文件，为了浏览方便，通常加 \| more 达到分页浏览的目的，                            例如：cat -n /home/a.txt \| more |
| less    | less指令用来分屏查看文件内容，它的功能与more指令类似，但是比more指令更加强大，支持各种显示终端。less指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，对于显示大型文件具有较高的效率。     例如：less /home/a.txt |
| >       | 覆盖写：ls -l >  文件（将ls输出内容覆盖写入文件）                                                                 cat 文件1 >  文件2（将文件1内容覆盖写入文件2） |
| >>      | 追加写：ls -al >> 文件（将ls输出内容追加写入文件）                       echo "内容" >> 文件（将字符串内容追加写入文件） |
| echo    | 输出内容到控制台                                                                                   输出环境变量：echo $Path                                                                     输出文本：echo "Hello World" |
| head    | head用于显示文件的开头部分内容，默认情况下head指令显示文件的前10行内容。<br/>基本语法:<br/>head 文件 (功能描述:查看文件头10行内容)<br/>head -n 5 文件(功能描述:查看文件头5行内容，5可以是任意行数) |
| tail    | tail用于输出文件中尾部的内容，默认情况下tail指令显示文件的后10行内容。<br />基本语法:<br/>1) tail 文件(功能描述:查看文件后10行内容)<br/>2) tail -n 5 文件（功能描述:查看文件后5行内容，5可以是任意行数）<br />3) **tail -f 文件(功能描述:实时追踪该文档的所有更新，工作经常使用)** |
| history | 查看已经执行过历史命令,也可以执行历史指令。<br/>基本语法：<br/>history(功能描述:查看已经执行过历史命令)<br/>显示所有的历史命令：history<br/>显示最近使用过的10个指令：history 10<br />执行历史编号为5的指令：!5 |
| date    | 输出系统时间：<br />date "+%Y年%m月%d日 %H:%M%S"（注意：+号不要忘记）<br />设置系统时间：<br />date -s "2022-05-18 11:11:22" |
| cal     | 显示当前日历：cal                                            |
